{% extends "bootstrap/bs5_base_top_navbar.html" %}

{% block head %}
<style>
 .title {
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    font-weight: bold;
    color: var(--bs-success)
  }
  .mono-block {
    font-family: monospace;
  }
</style>
{% endblock %}

{% block content %}
<main>
<!-- Body content title bar  -->
<!-- { % include 'bootstrap/header_strip.html' % } -->

<div class="container mt-1 rounded">
  <div class="alert alert-success" role="alert">
    <h4 class="alert-heading">NUTCase Usage Examples</h4>
    <div class="alert-link">
      For more details go to <a class="text-success-emphasis" href="https://github.com/ArthurMitchell42/nutcase" style="text-decoration: none;">NUTCase on GitHub</a>
    </div>
  </div>
</div>

<!--============================================ Body messages ============================================-->
{% include 'bootstrap/body_messages.html' %}
<div class="container">
  <p class="title">Valid end-points (paths)</p>
    <div class="mono-block"><pre>
  <b>/help</b>         Returns this message.
  <b>/log</b>          Displays the last log lines.
  <b>/health</b>       Returns a JSON structure to confirm NUTCase is alive.
  <b>/metrics</b>      Returns text output compatible with Prometheus scraping.
  <b>/json</b>         Returns JSON output compatible with HomePage and Webhooks.
  <b>/raw</b>          Returns JSON output suitable only for diagnostics.
  <b>/apclog</b>       Displays the event log of an APC server.
</pre></div>
      
    <p class="title">Valid parameters</p>
    <div class="mono-block"><pre>
  <b>lines</b>         Sets the number of lines to display. Only valid with /log
  <b>mode</b>          Optional. Specifies apc or nut mode. Default is nut.
  <b>target</b>        Specifies address and, optionally, port of the server.
  <b>addr</b>          Specifies address of the server as an alternative to target.
  <b>port</b>          Overrides the server default port if usering addr
</pre></div>
          
    <p class="title">Specifying the server parameters</p>
    Note: this is valid for end-points json, raw & metrics. metrics is used in these examples.<br><br>
    <div class="mono-block"><pre>
  <b>/metrics?target=A.B.C.D</b>       Specify the address of the server, assuming the default port.
  <b>/metrics?target=A.B.C.D:P</b>     Specify the address of the server and the port (p).
  <b>/metrics?addr=A.B.C.D</b>         Specify the address of the server, assuming the default port.
  <b>/metrics?addr=A.B.C.D&port=P</b>  Specify the address of the server and the port (P).
</pre></div>
          
    <p class="title">Specifying an APC server parameters</p>
    Note: this is valid for end-points json & raw. All other combinations of target, addr & port (above) are valid<br>
    For NUT servers <code>mode=nut</code> is also valid but is the default and need not be given.<br><br>
<div class="mono-block"><pre>
  <b>/json?mode=apc&target=A.B.C.D</b>   Specify the address of the server, assuming the default port.
</pre></div>
      
<p class="title">View the log file</p>
<div class="mono-block"><pre>
  <b>/log</b>              View the the last default (20) number of lines from the log.
  <b>/log?lines=30</b>     View the the last Specifyed number of lines from the log.
</pre></div>

    <p class="title">Example:</p>
    For example, if your NUT server is at 10.0.20.50, serving on the default port (3493) and nutcase is on address 10.0.20.40 on the default port (9995) then to get data for Prometheus enter:<br><br>
    <div class="mono-block"><pre>
    <span style="margin-left: 10px;"><b>http://10.0.20.40:9995/metrics?target=10.0.20.50:3493</b></span>
    </pre></div>
          
        <div class="d-flex d-inline justify-content-center mb-3">
          <div class="d-flex col-4 flex-column justify-content-center">
            <a href="https://www.paypal.com/donate?hosted_button_id=N6F4E9YCD5VC8" style="text-decoration: none;">Like this app?<br>Then why not buy me a coffee?</a>
          </div>
          <div class="d-flex col-4 d-inline align-items-center">
            <a href="https://www.paypal.com/donate?hosted_button_id=N6F4E9YCD5VC8">
          <img src="/static/images/paypal_donate.jpg" 
              class="rounded float-end" 
              width="100" height="100"
              alt="Like the app? Then why not buy me a coffee."></a>
        </div>
        <div class="d-flex col-4 flex-column justify-content-start">
          For details go to <a href="https://github.com/ArthurMitchell42/nutcase">NUTCase on GitHub</a>
        </div>
      </div>
      </div>
      
<!--============================================ Help Modal ============================================-->
<div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Help Page</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        For further help go to <a href="https://github.com/ArthurMitchell42/nutcase">NUTCase on GitHub</a>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

</main>
{% endblock %}

{% block script %}{% endblock %}
